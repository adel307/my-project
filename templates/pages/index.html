<!DOCTYPE html>
{% load static %}
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة المنتجات والعملاء والأسواق</title>
    <link rel="stylesheet" href="{% static 'css/products.css' %}">
    
</head>
<body>
    {% include 'parts/navbar.html' %}
    <div class="content">
        <div class="header">
            <h1>نظام إدارة المنتجات والعملاء والأسواق</h1>
            <p>عرض شامل لجميع البيانات في النظام</p>
        </div>

        <!-- قسم المنتجات -->
        <div class="section">
            <h2>المنتجات المتوفرة</h2>
            <div class="grid-container">
                {% for product in product_card %}
                <div class="card">
                    <h3>{{ product.name }}</h3>
                    <p class="price-tag">السعر: {{ product.price }} $</p>
                    <p><span class="badge category-badge">{{ product.get_cotegory_display }}</span></p>
                    <p>الحالة: 
                        <span class="badge {% if product.active %}badge-active{% else %}badge-inactive{% endif %}">
                            {{ product.active|yesno:"نشط,غير نشط" }}
                        </span>
                    </p>
                    {% if product.content %}
                    <p>الوصف: {{ product.content|truncatewords:15 }}</p>
                    {% endif %}
                    {% if product.product_time %}
                    <p>وقت المنتج: {{ product.product_time.Date }}</p>
                    {% endif %}
                </div>
                {% empty %}
                <div class="empty-message">
                    <p>لا توجد منتجات متاحة حالياً.</p>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- قسم العملاء -->
        <div class="section">
            <h2>العملاء المسجلين</h2>
            <div class="grid-container">
                {% for clint in clints_card %}
                <div class="card clint-card">
                    <h3>{{ clint.name }}</h3>
                    <p>الهاتف: {{ clint.phone }}</p>
                    <p>المنتج: {{ clint.product.name }}</p>
                    <p class="price-tag">سعر المنتج: {{ clint.product.price }} $</p>
                </div>
                {% empty %}
                <div class="empty-message">
                    <p>لا يوجد عملاء مسجلين حالياً.</p>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- قسم الأسواق -->
        <div class="section">
            <h2>فروع الأسواق</h2>
            <div class="grid-container">
                {% for market in markets_card %}
                <div class="card market-card">
                    <h3>فرع: {{ market.get_place_display }}</h3>
                    <p>عدد الزوار: {{ market.vesetors.count }}</p>
                    <h4>الزوار:</h4>
                    <ul>
                        {% for vesetor in market.vesetors.all %}
                        <li>{{ vesetor.name }} - {{ vesetor.phone }}</li>
                        {% empty %}
                        <li>لا يوجد زوار لهذا الفرع</li>
                        {% endfor %}
                    </ul>
                </div>
                {% empty %}
                <div class="empty-message">
                    <p>لا توجد فأسواق مسجلة حالياً.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    {% include 'parts/foter.html' %}
</body>
</html>